<!DOCTYPE html>
<html lang="bg">
<head>
    <meta charset="UTF-text-align: left;8">
    <title>Kaufland AI Chef</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 20px auto; background: #f4f4f4; }
        h1 { color: #d00000; } /* Kaufland Red */
        .container { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        form > div { margin-bottom: 15px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; }
        input[type="number"], select { width: 100px; padding: 8px; }
        button { background: #d00000; color: white; padding: 10px 15px; border: none; border-radius: 5px; cursor: pointer; font-size: 16px; }
        button:hover { background: #a00000; }
        .result { margin-top: 20px; padding: 15px; background: #fafafa; border: 1px solid #ddd; border-radius: 5px; white-space: pre-wrap; /* –ó–∞–ø–∞–∑–≤–∞ –Ω–æ–≤–∏—Ç–µ —Ä–µ–¥–æ–≤–µ –æ—Ç AI */ }
        .loading { font-style: italic; color: #555; }
        .recipe-card {
        margin-top: 25px;
        padding: 20px;
        background: #fafafa;
        border: 1px solid #ddd;
        border-radius: 8px;
    }
    .recipe-card h2 {
        color: #d00000; /* Kaufland Red */
        margin-top: 0;
        border-bottom: 2px solid #f0f0f0;
        padding-bottom: 10px;
    }
    .recipe-card h3 {
        color: #333;
        margin-top: 20px;
        margin-bottom: 10px;
    }
    .details {
        display: flex;
        justify-content: space-between;
        background: #f0f0f0;
        padding: 10px;
        border-radius: 5px;
        font-size: 0.9em;
    }
    .recipe-card ul, .recipe-card ol {
        padding-left: 20px;
    }
    .recipe-card li {
        margin-bottom: 8px;
        line-height: 1.5;
    }
    .note {
        font-style: italic;
        color: #005a9c; /* Lidl Blue */
        font-weight: bold;
    }
    /* ... (–¥—Ä—É–≥–∏—Ç–µ —Ç–∏ —Å—Ç–∏–ª–æ–≤–µ) ... */
    .fridge-section {
        background: #fdfcee; /* –õ–µ–∫ –∂—ä–ª—Ç —Ñ–æ–Ω */
        border: 1px solid #e6dbb9;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
    }
    .fridge-section label {
        font-size: 1.1em;
        color: #333;
    }
    #fridge_items {
        width: 95%; /* –ù–∞–ø—Ä–∞–≤–∏ –≥–æ —à–∏—Ä–æ–∫–æ */
        padding: 10px;
        margin-top: 10px;
        font-size: 1em;
        border: 1px solid #ccc;
        border-radius: 5px;
    }
    </style>
</head>

<body>
    <div class="container">
        <h1>üç≥ AI –ì–æ—Ç–≤–∞—á (–ó–∞—Ö—Ä–∞–Ω–µ–Ω –æ—Ç Kaufland)</h1>

        <form method="POST">
            <div class="fridge-section">
            <label for="fridge_items">–ö–∞–∫–≤–æ –∏–º–∞—à –≤ —Ö–ª–∞–¥–∏–ª–Ω–∏–∫–∞?</label>
            <form method="POST" id="recipe-form">
                <input type="text" id="fridge_items" name="fridge_items"
                       placeholder="–Ω–∞–ø—Ä: 3 —è–π—Ü–∞, 1 —á—É—à–∫–∞, –º–∞–ª–∫–æ —Å–∏—Ä–µ–Ω–µ">
                </div>
            <div>
                <label for="people">–ó–∞ –∫–æ–ª–∫–æ –¥—É—à–∏?</label>
                <input type="number" id="people" name="people" value="2" min="1">
            </div>
            <div>
                <label for="veg">–í–µ–≥–µ—Ç–∞—Ä–∏–∞–Ω—Å–∫–æ?</label>
                <input type="checkbox" id="veg" name="veg" value="yes">
            </div>
            <div>
                <label for="healthy">–ó–¥—Ä–∞–≤–æ—Å–ª–æ–≤–Ω–æ?</label>
                <input type="checkbox" id="healthy" name="healthy" value="yes">
            </div>

            <div>
                <label for="budget">–ë—é–¥–∂–µ—Ç–Ω–æ –Ω–∏–≤–æ</label>
                <select id="budget" name="budget">
                    <option value="–ù—è–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ" selected>–ù—è–º–∞ –∑–Ω–∞—á–µ–Ω–∏–µ</option>
                    <option value="–ò–∫–æ–Ω–æ–º–∏—á–µ–Ω">–ò–∫–æ–Ω–æ–º–∏—á–µ–Ω (—Ñ–æ–∫—É—Å –≤—ä—Ä—Ö—É –∑–µ–ª–µ–Ω—á—É—Ü–∏, —è–π—Ü–∞, –æ—Å–Ω–æ–≤–Ω–∏)</option>
                    <option value="–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω">–°—Ç–∞–Ω–¥–∞—Ä—Ç–µ–Ω (–≤–∫–ª—é—á–≤–∞ –º–µ—Å–æ, —Å–∏—Ä–µ–Ω–∞ –∏ –¥—Ä.)</option>
                </select>
            </div>
            <div>
            <label>–ü–∞–∑–∞—Ä—É–≤–∞–π –≤:</label>
            <input type="checkbox" id="kaufland" name="stores" value="Kaufland" checked>
            <label for="kaufland" style="display: inline-block; font-weight: normal;">Kaufland</label>
            </div>


            <div>
                <label>–ê–ª–µ—Ä–≥–∏–∏ / –î–∏–µ—Ç–∞:</label>
                <input type="checkbox" id="gluten_free" name="preferences" value="–ë–µ–∑ –≥–ª—É—Ç–µ–Ω">
                <label for="gluten_free" style="display: inline-block; font-weight: normal;">–ë–µ–∑ –≥–ª—É—Ç–µ–Ω</label>

                <input type="checkbox" id="lactose_free" name="preferences" value="–ë–µ–∑ –ª–∞–∫—Ç–æ–∑–∞" style="margin-left: 15px;">
                <label for="lactose_free" style="display: inline-block; font-weight: normal;">–ë–µ–∑ –ª–∞–∫—Ç–æ–∑–∞</label>

                <input type="checkbox" id="low_carb" name="preferences" value="–ù–∏—Å–∫–æ–≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–Ω–æ" style="margin-left: 15px;">
                <label for="low_carb" style="display: inline-block; font-weight: normal;">–ù–∏—Å–∫–æ–≤—ä–≥–ª–µ—Ö–∏–¥—Ä–∞—Ç–Ω–æ</label>
            </div>

            <div>
                <label>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:</label>
                <input type="checkbox" id="quick" name="preferences" value="–ë—ä—Ä–∑–æ (–ø–æ–¥ 20 –º–∏–Ω)">
                <label for="quick" style="display: inline-block; font-weight: normal;">–ë—ä—Ä–∑–æ (–ø–æ–¥ 20 –º–∏–Ω)</label>

                <input type="checkbox" id="fasting" name="preferences" value="–ü–æ—Å—Ç–Ω–æ" style="margin-left: 15px;">
                <label for="fasting" style="display: inline-block; font-weight: normal;">–ü–æ—Å—Ç–Ω–æ</label>
            </div>
            <button type="submit">–ì–µ–Ω–µ—Ä–∏—Ä–∞–π –†–µ—Ü–µ–ø—Ç–∏</button>
        </form>

        

        {% if loading %}
            <div classs="loading">
                <p>‚è≥ –ú–∏—Å–ª—è —Å–∏ —Ä–µ—Ü–µ–ø—Ç–∏... Scraper-—ä—Ç —Ä–∞–±–æ—Ç–∏... –ú–æ–ª—è, –∏–∑—á–∞–∫–∞–π... (—Ç–æ–≤–∞ –º–æ–∂–µ –¥–∞ –æ—Ç–Ω–µ–º–µ 10-15 —Å–µ–∫—É–Ω–¥–∏)</p>
            </div>
        {% endif %}

        {% if recipe_data and recipe_data.recipes %}

        {% for recipe in recipe_data.recipes %}
        <div class="recipe-card">


            <h2>{{ recipe.title }}</h2>

                <div class="details">
                    <span><strong>–¶–µ–Ω–∞:</strong> {{ recipe.price_estimate }}</span>
                    <span><strong>–ü–æ—Ä—Ü–∏–∏:</strong> {{ recipe.servings }}</span>
                    <span><strong>–í—Ä–µ–º–µ:</strong> {{ recipe.prep_time }}</span>
                </div>

                <h3>–ù–µ–æ–±—Ö–æ–¥–∏–º–∏ —Å—ä—Å—Ç–∞–≤–∫–∏:</h3>
                <ul>
                    {% for ingredient in recipe.ingredients %}
                        <li>
                            {{ ingredient.item }}
                            {% if ingredient.note %}
                                <span class="note">({{ ingredient.note }})</span>
                            {% endif %}
                        </li>
                    {% endfor %}
                </ul>

                <h3>–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ (—Å—Ç—ä–ø–∫–∞ –ø–æ —Å—Ç—ä–ø–∫–∞):</h3>
                <ol>
                    {% for step in recipe.instructions %}
                        <li>{{ step }}</li>
                    {% endfor %}
                </ol>

            </div>
        {% endfor %}

    {% endif %}

        {% if error %}
            <div class="result" style="color: red; background: #fee;">
                <strong>–ì–†–ï–®–ö–ê:</strong><br>
                {{ error }}
            </div>
        {% endif %}
    </div>
</body>
</html>